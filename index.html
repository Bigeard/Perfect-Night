<!doctypehtml><html><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><title>Perfect Night</title><meta content="Perfect Night"name=title><meta content="Multi Player Video Game | Perfect Night"name=description><meta content="perfectnight, multiplayer, videogame"name=keywords><meta content="width=device-width"name=viewport><link href=https://www.raylib.com/favicon.ico rel="shortcut icon"><style>html{background:#000}body{margin:0;display:flex;align-items:center;justify-content:center;height:100vh}canvas{width:100%}#peerjs{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}</style></head><body><canvas id=canvas oncontextmenu=event.preventDefault() tabindex=-1></canvas><table id=peerjs><tr><td>Status:<span id=status></span></td><td>Messages:<span id=message></span></td></tr><tr><td><div style=font-weight:700 title="Copy this ID to the input on send.html.">ID: <input id=receiver-id disabled></div><button onclick=CopyToClipboard()>Copy ID</button></td><td><input id=sendMessageBox placeholder="Enter a message..."></td></tr></table><script src=https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js></script><script>var Module={canvas:document.getElementById("canvas")},peerjs=document.getElementById("peerjs");togglePeerJs=()=>("none"===peerjs.style.display?peerjs.style.display="block":peerjs.style.display="none",1),function(){var e=null,n=null,o=null,t=document.getElementById("receiver-id"),s=document.getElementById("status"),l=document.getElementById("message"),c=document.getElementById("sendMessageBox");function i(e){var n=new Date,o=n.getHours(),t=c(n.getMinutes()),s=c(n.getSeconds());function c(e){return e<10&&(e="0"+e),e}o>12?o-=12:0===o&&(o=12),l.innerHTML='<br><span class="msg-time">'+o+":"+t+":"+s+"</span>  -  "+e+l.innerHTML}CopyToClipboard=()=>{t.select(),navigator.clipboard.writeText(t.value)},c.addEventListener("keypress",(function(e){if("13"===e.keyCode)if(o&&o.open){var n=c.value;c.value="",o.send(n),i('<span class="selfMsg">Self: </span>'+n)}else console.error("Connection is closed")})),(n=new Peer(null,{debug:2})).on("open",(function(o){null===n.id?(console.log("Received null id from peer open"),n.id=e):e=n.id,t.value=n.id,s.innerHTML="Awaiting connection..."})),n.on("connection",(function(e){o&&o.open?e.on("open",(function(){e.send("Already connected to another client"),setTimeout((function(){e.close()}),500)})):(o=e,s.innerHTML="Connected to: "+o.peer,o.on("data",(function(e){i('<span class="peerMsg">Peer: </span>'+e)})),o.on("close",(function(){s.innerHTML="Connection reset<br>Awaiting connection...",o=null})))})),n.on("disconnected",(function(){s.innerHTML="Connection lost. Please reconnect",n.id=e,n._lastServerId=e,n.reconnect()})),n.on("close",(function(){o=null,s.innerHTML="Connection destroyed. Please refresh"})),n.on("error",(function(e){console.error(e),alert(""+e)}))}()</script><script src=index.js async></script></body></html>