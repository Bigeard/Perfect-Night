<!doctypehtml><html><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><title>Perfect Night</title><meta content="Perfect Night"name=title><meta content="Multi Player Video Game | Perfect Night"name=description><meta content="perfectnight, multiplayer, videogame"name=keywords><meta content="width=device-width"name=viewport><link href=favicon.ico rel="shortcut icon"><script src=js/peerjs.min.js></script><script src=js/virtualgamepad.js></script><script src=js/filesaver.min.js></script><script>function saveFileFromMEMFSToDisk(e,a){var i,o=FS.readFile(e);i=new Blob([o.buffer],{type:"application/octet-binary"}),saveAs(i,a)}</script><style>html{background:#212530;margin:0;padding:0}body{display:flex;align-items:center;justify-content:center;height:100vh;margin:0;padding:0}canvas{width:100%}</style></head><body><canvas id=canvas oncontextmenu=event.preventDefault() tabindex=-1></canvas><script>var Module={canvas:document.getElementById("canvas")},gamepadUrl="n",lastPeerId=null,peer=null;peer=new Peer({reliable:!1,secure:!1,host:"192.168.12.1",port:9e3,path:"/peer",iceServers:[{urls:["192.168.12.1:5349"]}],debug:2}),console.info(peer),peer.on("open",(e=>{null===peer.id?(console.info("Received null id from peer open"),peer.id=lastPeerId):lastPeerId=peer.id,gamepadUrl=window.location.href+"g.htm?i="+peer.id,console.info(gamepadUrl)})),peer.on("connection",(e=>{let n=!1;if(listGamepad.forEach((o=>o.conn?.peer===e.peer?n=o:0)),n)n.conn=e,n.connect();else if(0!=e.metadata?.id)n=listGamepad.get(e.metadata.id),n.conn=e,n.connect();else{if(listGamepad.size>=8)return void e.on("open",(()=>{e.send("Error: To many players"),setTimeout((()=>e.close()),500)}));n=new VirtualGamepad(e,e.peer,listGamepad.size),listGamepad.set(n.id,n)}const o=[];listGamepad.forEach((e=>o.push({name:e.name,peerId:e.conn?.peer}))),console.info("Player connected: ",o)})),peer.on("disconnected",(()=>{console.info("Connection lost. Please reconnect"),peer.id=lastPeerId,peer._lastServerId=lastPeerId,peer.reconnect()})),peer.on("close",(()=>{console.info("Connection destroyed. Please refresh"),peer.reconnect()})),peer.on("error",(e=>console.error(e)))</script><script src=index.js async></script></body></html>